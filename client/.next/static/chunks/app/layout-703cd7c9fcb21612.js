(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let a=r(8229),o=r(8883),s=r(3063),n=a._(r(1193));function i(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=s.Image},3358:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>i,_:()=>n});var a=r(5155),o=r(2115);let s=(0,o.createContext)(void 0);function n(){let e=(0,o.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}function i(e){let{children:t}=e,[r,n]=(0,o.useState)([]);return(0,o.useEffect)(()=>{try{let e=localStorage.getItem("roastDirectCart");e&&n(JSON.parse(e))}catch(e){console.error("Failed to load cart from localStorage:",e)}},[]),(0,o.useEffect)(()=>{try{localStorage.setItem("roastDirectCart",JSON.stringify(r))}catch(e){console.error("Failed to save cart to localStorage:",e)}},[r]),(0,a.jsx)(s.Provider,{value:{items:r,addToCart:e=>{n(t=>{let r=t.findIndex(t=>t.productId===e.productId&&t.grindOption===e.grindOption);if(!(r>-1))return[...t,e];{let a=[...t];return a[r]={...a[r],quantity:e.quantity},a}})},removeFromCart:(e,t)=>{n(r=>r.filter(r=>r.productId!==e||r.grindOption!==t))},updateQuantity:(e,t,r)=>!(r<1)&&(n(a=>a.map(a=>a.productId===e&&a.grindOption===t?{...a,quantity:r}:a)),!0),clearCart:()=>{n([])},getCartTotal:()=>r.reduce((e,t)=>e+t.price*t.quantity,0),getItemCount:()=>r.reduce((e,t)=>e+t.quantity,0)},children:t})}},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},5374:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>l});var a=r(5155),o=r(2115),s=r(5695);let n=(0,o.createContext)(void 0);function i(){let e=(0,o.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function l(e){let{children:t}=e,[r,i]=(0,o.useState)(!1),[l,u]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null),m=(0,s.useRouter)(),h=(0,s.usePathname)();(0,o.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("roastDirectAuth");i("true"===e);let t=localStorage.getItem("userData");t?d(JSON.parse(t)):d(null)}catch(e){console.error("Failed to check auth status:",e),i(!1),d(null)}finally{u(!1)}};e();let t=t=>{"roastDirectAuth"===t.key&&e()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[]),(0,o.useEffect)(()=>{l||r||["/cart"].some(e=>h.startsWith(e))&&m.push("/login")},[r,l,h,m]);let f=async(e,t)=>{try{let r=await fetch("".concat("http://localhost:5002","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)return!1;let a=await r.json();return localStorage.setItem("roastDirectAuth","true"),localStorage.setItem("authToken",a.token),localStorage.setItem("userData",JSON.stringify(a.user)),i(!0),d(a.user),!0}catch(e){return console.error("Login error:",e),!1}};return(0,a.jsx)(n.Provider,{value:{isAuthenticated:r,login:f,logout:()=>{localStorage.removeItem("roastDirectAuth"),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),i(!1),d(null),m.push("/login")},checkingAuth:l,user:c},children:t})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>o.a});var a=r(1469),o=r.n(a)},7231:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),o=r(6874),s=r.n(o),n=r(6766),i=r(5695),l=r(5374);function u(){let{logout:e}=(0,l.A)();return(0,a.jsx)("button",{onClick:()=>{e()},className:"px-4 py-2 rounded-md bg-amber-700 text-white hover:bg-amber-800 transition-colors duration-200",children:"Logout"})}var c=r(3358);let d=()=>{let{isAuthenticated:e}=(0,l.A)(),{getItemCount:t}=(0,c._)();return(0,i.usePathname)(),(0,a.jsx)("nav",{className:"bg-white border-b border-gray-100 py-4 px-6 shadow-sm sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsx)(s(),{href:"/",className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.default,{src:"/web-images/logo.png",alt:"RoastDirect Logo",width:50,height:50,className:"mr-2"}),(0,a.jsx)("span",{className:"text-amber-800 font-bold text-xl",children:"RoastDirect"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(s(),{href:"/products",className:"px-4 py-2 text-gray-700 hover:text-amber-700 transition-colors duration-200",children:"Shop Products"}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(),{href:"/orders",className:"px-4 py-2 text-gray-700 hover:text-amber-700 transition-colors duration-200",children:"View Orders"}),(0,a.jsxs)(s(),{href:"/cart",className:"p-2 text-amber-700 hover:text-amber-800 transition-colors duration-200 relative",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t()>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-amber-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:t()})]}),(0,a.jsx)(u,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(),{href:"/signup",className:"px-4 py-2 rounded-md bg-amber-700 text-white hover:bg-amber-800 transition-colors duration-200 w-[100px] text-center",children:"Sign Up"}),(0,a.jsx)(s(),{href:"/login",className:"px-4 py-2 rounded-md bg-amber-700 text-white hover:bg-amber-800 transition-colors duration-200 w-[100px] text-center",children:"Login"})]})]})]})})}},8061:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4147,23)),Promise.resolve().then(r.t.bind(r,8489,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,7231)),Promise.resolve().then(r.bind(r,5374)),Promise.resolve().then(r.bind(r,3358))},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{e.O(0,[896,874,63,441,964,358],()=>e(e.s=8061)),_N_E=e.O()}]);